INFO 2025-09-02 11:15:23,230 views 69169 6204518400 Auth form submission - Form valid: True, Credentials exist: True
INFO 2025-09-02 11:15:23,230 views 69169 6204518400 Processing authentication with request_token: FLYVzcnPjd...
INFO 2025-09-02 11:15:23,230 views 69169 6204518400 Attempting to generate session...
ERROR 2025-09-02 11:15:23,729 services 69169 6204518400 Session generation failed: Token is invalid or has expired.
ERROR 2025-09-02 11:15:23,730 views 69169 6204518400 Authentication failed: Token is invalid or has expired.
Traceback (most recent call last):
  File "/Users/prathameshkale/Documents/django-automation/stock_data/views.py", line 51, in settings
    session_data = kite_service.generate_session(request_token)
  File "/Users/prathameshkale/Documents/django-automation/stock_data/services.py", line 75, in generate_session
    session_data = self.kite.generate_session(
        request_token, api_secret=self.api_secret
    )
  File "/Users/prathameshkale/Documents/django-automation/venv/lib/python3.13/site-packages/kiteconnect/connect.py", line 263, in generate_session
    resp = self._post("api.token", params={
        "api_key": self.api_key,
        "request_token": request_token,
        "checksum": checksum
    })
  File "/Users/prathameshkale/Documents/django-automation/venv/lib/python3.13/site-packages/kiteconnect/connect.py", line 865, in _post
    return self._request(route, "POST", url_args=url_args, params=params, is_json=is_json, query_params=query_params)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/prathameshkale/Documents/django-automation/venv/lib/python3.13/site-packages/kiteconnect/connect.py", line 937, in _request
    raise exp(data["message"], code=r.status_code)
kiteconnect.exceptions.TokenException: Token is invalid or has expired.
INFO 2025-09-02 11:15:29,057 views 69169 6204518400 Auth form submission - Form valid: True, Credentials exist: True
INFO 2025-09-02 11:15:29,057 views 69169 6204518400 Processing authentication with request_token: FLYVzcnPjd...
INFO 2025-09-02 11:15:29,057 views 69169 6204518400 Attempting to generate session...
ERROR 2025-09-02 11:15:29,388 services 69169 6204518400 Session generation failed: Token is invalid or has expired.
ERROR 2025-09-02 11:15:29,389 views 69169 6204518400 Authentication failed: Token is invalid or has expired.
Traceback (most recent call last):
  File "/Users/prathameshkale/Documents/django-automation/stock_data/views.py", line 51, in settings
    session_data = kite_service.generate_session(request_token)
  File "/Users/prathameshkale/Documents/django-automation/stock_data/services.py", line 75, in generate_session
    session_data = self.kite.generate_session(
        request_token, api_secret=self.api_secret
    )
  File "/Users/prathameshkale/Documents/django-automation/venv/lib/python3.13/site-packages/kiteconnect/connect.py", line 263, in generate_session
    resp = self._post("api.token", params={
        "api_key": self.api_key,
        "request_token": request_token,
        "checksum": checksum
    })
  File "/Users/prathameshkale/Documents/django-automation/venv/lib/python3.13/site-packages/kiteconnect/connect.py", line 865, in _post
    return self._request(route, "POST", url_args=url_args, params=params, is_json=is_json, query_params=query_params)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/prathameshkale/Documents/django-automation/venv/lib/python3.13/site-packages/kiteconnect/connect.py", line 937, in _request
    raise exp(data["message"], code=r.status_code)
kiteconnect.exceptions.TokenException: Token is invalid or has expired.
INFO 2025-09-02 11:17:47,173 views 69169 6204518400 Auth form submission - Form valid: True, Credentials exist: True
INFO 2025-09-02 11:17:47,173 views 69169 6204518400 Processing authentication with request_token: n8ItarV61y...
INFO 2025-09-02 11:17:47,173 views 69169 6204518400 Attempting to generate session...
INFO 2025-09-02 11:17:47,605 views 69169 6204518400 Session data received: {'user_type': 'individual/res_no_nn', 'email': 'bhatikares@gmail.com', 'user_name': 'Sourabh Vidhyadhar Bhatikare', 'user_shortname': 'Sourabh', 'broker': 'ZERODHA', 'exchanges': ['NSE', 'NFO', 'BFO', 'BSE', 'MF'], 'products': ['CNC', 'NRML', 'MIS', 'BO', 'CO'], 'order_types': ['MARKET', 'LIMIT', 'SL', 'SL-M'], 'avatar_url': None, 'user_id': 'WH8704', 'api_key': 'bd53m7sxfmjy2kbz', 'access_token': 'OP125jPtFBmRR29bdoZsMDcuTy3J6v5Q', 'public_token': '7SbmT9NeoOGqhrTNR3pxQQwFsggGNVGR', 'refresh_token': '', 'enctoken': 'Ux4Z3FMuYL5hbwTRsUZ0b/actaBi6ONNXnZS7PHync7FNYH4bxv3xxuTT+398GApKLLlWYVUa+meGJ8VO+DoMVHz+fLmcFOaMQVer2xtDgDopbZXJ2usyeAYd9s7yrY=', 'login_time': datetime.datetime(2025, 9, 2, 16, 34, 37), 'meta': {'demat_consent': 'consent'}}
INFO 2025-09-02 11:17:47,609 views 69169 6204518400 Authentication successful for user: WH8704
ERROR 2025-09-02 11:18:11,675 views 69169 6204518400 Error fetching data: KiteDataService.fetch_historical_data() got an unexpected keyword argument 'symbol'
INFO 2025-09-02 11:20:46,874 services 69281 6165934080 Fetching data for token 2953217 from 2025-08-26 to 2025-09-02
INFO 2025-09-02 11:21:13,988 services 69281 6165934080 Fetching data for token 341249 from 2025-08-26 to 2025-09-02
ERROR 2025-09-02 11:32:45,526 views 69403 6160379904 Error fetching data: KiteDataService.load_data_from_json() takes 2 positional arguments but 5 were given
Traceback (most recent call last):
  File "/Users/prathameshkale/Documents/django-automation/stock_data/views.py", line 41, in index
    existing_data = kite_service.load_data_from_json(symbol, from_date, to_date, interval)
TypeError: KiteDataService.load_data_from_json() takes 2 positional arguments but 5 were given
INFO 2025-09-02 11:34:05,090 services 69576 6205370368 Fetching data for token 738561 from 2025-08-03 to 2025-09-02
ERROR 2025-09-02 11:34:05,728 services 69576 6205370368 Error saving data to JSON: 'str' object has no attribute 'strftime'
ERROR 2025-09-02 11:34:05,728 views 69576 6205370368 Error fetching data: 'str' object has no attribute 'strftime'
Traceback (most recent call last):
  File "/Users/prathameshkale/Documents/django-automation/stock_data/views.py", line 55, in index
    filepath = kite_service.save_data_to_json(historical_data, symbol, from_date, to_date, interval)
  File "/Users/prathameshkale/Documents/django-automation/stock_data/services.py", line 407, in save_data_to_json
    from_date_str = from_date.strftime("%Y%m%d")
                    ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'strftime'
INFO 2025-09-02 11:34:09,641 services 69576 6205370368 Fetching data for token 408065 from 2025-08-03 to 2025-09-02
ERROR 2025-09-02 11:34:10,382 services 69576 6205370368 Error saving data to JSON: 'str' object has no attribute 'strftime'
ERROR 2025-09-02 11:34:10,382 views 69576 6205370368 Error fetching data: 'str' object has no attribute 'strftime'
Traceback (most recent call last):
  File "/Users/prathameshkale/Documents/django-automation/stock_data/views.py", line 55, in index
    filepath = kite_service.save_data_to_json(historical_data, symbol, from_date, to_date, interval)
  File "/Users/prathameshkale/Documents/django-automation/stock_data/services.py", line 407, in save_data_to_json
    from_date_str = from_date.strftime("%Y%m%d")
                    ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'strftime'
INFO 2025-09-02 11:36:06,140 services 69610 6194507776 Fetching data for token 408065 from 2025-08-03 to 2025-09-02
ERROR 2025-09-02 11:36:06,705 services 69610 6194507776 Error saving data to JSON: 'str' object has no attribute 'strftime'
ERROR 2025-09-02 11:36:06,705 views 69610 6194507776 Error fetching data: 'str' object has no attribute 'strftime'
Traceback (most recent call last):
  File "/Users/prathameshkale/Documents/django-automation/stock_data/views.py", line 69, in index
    filepath = kite_service.save_data_to_json(historical_data, symbol, from_date, to_date, interval)
  File "/Users/prathameshkale/Documents/django-automation/stock_data/services.py", line 407, in save_data_to_json
    from_date_str = from_date.strftime("%Y%m%d")
                    ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'strftime'
INFO 2025-09-02 11:36:10,072 services 69610 6194507776 Fetching data for token 408065 from 2025-08-03 to 2025-09-02
ERROR 2025-09-02 11:36:10,667 services 69610 6194507776 Error saving data to JSON: 'str' object has no attribute 'strftime'
ERROR 2025-09-02 11:36:10,667 views 69610 6194507776 Error fetching data: 'str' object has no attribute 'strftime'
Traceback (most recent call last):
  File "/Users/prathameshkale/Documents/django-automation/stock_data/views.py", line 69, in index
    filepath = kite_service.save_data_to_json(historical_data, symbol, from_date, to_date, interval)
  File "/Users/prathameshkale/Documents/django-automation/stock_data/services.py", line 407, in save_data_to_json
    from_date_str = from_date.strftime("%Y%m%d")
                    ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'strftime'
INFO 2025-09-02 11:38:23,156 services 69659 6202798080 Fetching data for token 408065 from 2025-08-03 to 2025-09-02
INFO 2025-09-02 11:38:23,717 services 69659 6202798080 Data saved to /Users/prathameshkale/Documents/django-automation/data_storage/INFY_minute_20250803_to_20250902_20250902_113823.json
INFO 2025-09-02 11:38:38,715 services 69659 6202798080 Fetching data for token 408065 from 2025-08-03 to 2025-09-02
INFO 2025-09-02 11:38:39,329 services 69659 6202798080 Data saved to /Users/prathameshkale/Documents/django-automation/data_storage/INFY_minute_20250803_to_20250902_20250902_113839.json
INFO 2025-09-02 11:39:46,515 services 69872 6166065152 Fetching data for token 738561 from 2025-08-03 to 2025-09-02
INFO 2025-09-02 11:39:47,128 services 69872 6166065152 Data saved to /Users/prathameshkale/Documents/django-automation/data_storage/RELIANCE_minute_20250803_to_20250902_20250902_113947.json
INFO 2025-09-02 11:40:04,957 services 69872 6166065152 Fetching data for token 2939649 from 2025-08-01 to 2025-09-02
INFO 2025-09-02 11:40:05,495 services 69872 6166065152 Data saved to /Users/prathameshkale/Documents/django-automation/data_storage/LT_minute_20250801_to_20250902_20250902_114005.json
INFO 2025-09-02 15:26:58,184 services 71680 6197096448 Fetching data for token 2953217 from 2025-08-03 to 2025-09-02
INFO 2025-09-02 15:26:58,880 services 71680 6197096448 Data saved to /Users/prathameshkale/Documents/django-automation/data_storage/TCS_minute_20250803_to_20250902_20250902_152658.json
INFO 2025-09-02 17:45:40,451 strategy_service 74297 12901707776 Running strategy on file: /Users/prathameshkale/Documents/django-automation/data_storage/TCS_minute_20250803_to_20250902_20250902_152658.json
INFO 2025-09-02 17:45:40,603 strategy_service 74297 12901707776 Saved 20 signals for TCS
ERROR 2025-09-02 17:45:40,604 strategy_service 74297 12901707776 Error saving backtest results: keys must be str, int, float, bool or None, not Timestamp
ERROR 2025-09-02 17:45:40,604 strategy_service 74297 12901707776 Error running strategy: keys must be str, int, float, bool or None, not Timestamp
INFO 2025-09-02 17:45:47,366 strategy_service 74297 12901707776 Running strategy on file: /Users/prathameshkale/Documents/django-automation/data_storage/TCS_minute_20250803_to_20250902_20250902_152658.json
INFO 2025-09-02 17:45:47,501 strategy_service 74297 12901707776 Saved 20 signals for TCS
ERROR 2025-09-02 17:45:47,502 strategy_service 74297 12901707776 Error saving backtest results: keys must be str, int, float, bool or None, not Timestamp
ERROR 2025-09-02 17:45:47,502 strategy_service 74297 12901707776 Error running strategy: keys must be str, int, float, bool or None, not Timestamp
INFO 2025-09-02 17:47:01,100 strategy_service 74297 12901707776 Running strategy on file: /Users/prathameshkale/Documents/django-automation/data_storage/INFY_minute_20250803_to_20250902_20250902_113839.json
INFO 2025-09-02 17:47:01,250 strategy_service 74297 12901707776 Saved 21 signals for INFY
ERROR 2025-09-02 17:47:01,250 strategy_service 74297 12901707776 Error saving backtest results: keys must be str, int, float, bool or None, not Timestamp
ERROR 2025-09-02 17:47:01,250 strategy_service 74297 12901707776 Error running strategy: keys must be str, int, float, bool or None, not Timestamp
INFO 2025-09-02 17:48:44,683 strategy_service 74297 12901707776 Running strategy on file: /Users/prathameshkale/Documents/django-automation/data_storage/INFY_minute_20250803_to_20250902_20250902_113839.json
INFO 2025-09-02 17:48:44,831 strategy_service 74297 12901707776 Saved 21 signals for INFY
ERROR 2025-09-02 17:48:44,831 strategy_service 74297 12901707776 Error saving backtest results: keys must be str, int, float, bool or None, not Timestamp
ERROR 2025-09-02 17:48:44,831 strategy_service 74297 12901707776 Error running strategy: keys must be str, int, float, bool or None, not Timestamp
INFO 2025-09-02 17:50:50,082 strategy_service 74511 6145126400 Running strategy on file: /Users/prathameshkale/Documents/django-automation/data_storage/RELIANCE_minute_20250803_to_20250902_20250902_113947.json
INFO 2025-09-02 17:50:50,227 strategy_service 74511 6145126400 Saved 13 signals for RELIANCE
INFO 2025-09-02 17:50:50,228 strategy_service 74511 6145126400 Saved backtest results for RELIANCE
INFO 2025-09-02 17:58:32,745 strategy_service 74511 6145126400 Running strategy on file: /Users/prathameshkale/Documents/django-automation/data_storage/INFY_minute_20250803_to_20250902_20250902_113839.json
INFO 2025-09-02 17:58:32,873 strategy_service 74511 6145126400 Saved 21 signals for INFY
INFO 2025-09-02 17:58:32,873 strategy_service 74511 6145126400 Saved backtest results for INFY
INFO 2025-09-02 18:08:09,118 services 74787 6133968896 Fetching data for token 2939649 from 2025-08-03 to 2025-09-02
INFO 2025-09-02 18:08:09,731 services 74787 6133968896 Data saved to /Users/prathameshkale/Documents/django-automation/data_storage/LT_minute_20250803_to_20250902_20250902_180809.json
INFO 2025-09-02 18:08:50,954 strategy_service 74787 6133968896 Running strategy on file: /Users/prathameshkale/Documents/django-automation/data_storage/LT_minute_20250803_to_20250902_20250902_180809.json
INFO 2025-09-02 18:08:51,104 strategy_service 74787 6133968896 Saved 14 signals for LT
INFO 2025-09-02 18:08:51,105 strategy_service 74787 6133968896 Saved backtest results for LT
INFO 2025-09-02 18:29:05,002 views 74787 6133968896 Auth form submission - Form valid: True, Credentials exist: True
INFO 2025-09-02 18:29:05,003 views 74787 6133968896 Processing authentication with request_token: n8ItarV61y...
INFO 2025-09-02 18:29:05,003 views 74787 6133968896 Attempting to generate session...
ERROR 2025-09-02 18:29:05,260 services 74787 6133968896 Session generation failed: Token is invalid or has expired.
ERROR 2025-09-02 18:29:05,261 views 74787 6133968896 Authentication failed: Token is invalid or has expired.
Traceback (most recent call last):
  File "/Users/prathameshkale/Documents/django-automation/stock_data/views.py", line 127, in settings
    session_data = kite_service.generate_session(request_token)
  File "/Users/prathameshkale/Documents/django-automation/stock_data/services.py", line 162, in generate_session
    session_data = self.kite.generate_session(
        request_token, api_secret=self.api_secret
    )
  File "/Users/prathameshkale/Documents/django-automation/venv/lib/python3.13/site-packages/kiteconnect/connect.py", line 263, in generate_session
    resp = self._post("api.token", params={
        "api_key": self.api_key,
        "request_token": request_token,
        "checksum": checksum
    })
  File "/Users/prathameshkale/Documents/django-automation/venv/lib/python3.13/site-packages/kiteconnect/connect.py", line 865, in _post
    return self._request(route, "POST", url_args=url_args, params=params, is_json=is_json, query_params=query_params)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/prathameshkale/Documents/django-automation/venv/lib/python3.13/site-packages/kiteconnect/connect.py", line 937, in _request
    raise exp(data["message"], code=r.status_code)
kiteconnect.exceptions.TokenException: Token is invalid or has expired.
INFO 2025-09-02 18:29:17,356 views 74787 6133968896 Auth form submission - Form valid: True, Credentials exist: True
INFO 2025-09-02 18:29:17,356 views 74787 6133968896 Processing authentication with request_token: n8ItarV61y...
INFO 2025-09-02 18:29:17,356 views 74787 6133968896 Attempting to generate session...
ERROR 2025-09-02 18:29:17,591 services 74787 6133968896 Session generation failed: Token is invalid or has expired.
ERROR 2025-09-02 18:29:17,592 views 74787 6133968896 Authentication failed: Token is invalid or has expired.
Traceback (most recent call last):
  File "/Users/prathameshkale/Documents/django-automation/stock_data/views.py", line 127, in settings
    session_data = kite_service.generate_session(request_token)
  File "/Users/prathameshkale/Documents/django-automation/stock_data/services.py", line 162, in generate_session
    session_data = self.kite.generate_session(
        request_token, api_secret=self.api_secret
    )
  File "/Users/prathameshkale/Documents/django-automation/venv/lib/python3.13/site-packages/kiteconnect/connect.py", line 263, in generate_session
    resp = self._post("api.token", params={
        "api_key": self.api_key,
        "request_token": request_token,
        "checksum": checksum
    })
  File "/Users/prathameshkale/Documents/django-automation/venv/lib/python3.13/site-packages/kiteconnect/connect.py", line 865, in _post
    return self._request(route, "POST", url_args=url_args, params=params, is_json=is_json, query_params=query_params)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/prathameshkale/Documents/django-automation/venv/lib/python3.13/site-packages/kiteconnect/connect.py", line 937, in _request
    raise exp(data["message"], code=r.status_code)
kiteconnect.exceptions.TokenException: Token is invalid or has expired.
INFO 2025-09-03 08:20:52,355 strategy_service 79358 6191525888 Running strategy on file: /Users/prathameshkale/Documents/django-automation/data_storage/TCS_minute_20250803_to_20250902_20250902_152658.json
INFO 2025-09-03 08:20:52,502 strategy_service 79358 6191525888 Saved 20 signals for TCS
INFO 2025-09-03 08:20:52,503 strategy_service 79358 6191525888 Saved backtest results for TCS
